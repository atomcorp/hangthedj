(this.webpackJsonphangthedj=this.webpackJsonphangthedj||[]).push([[0],[,,,,function(e,a,t){e.exports={choice:"InPlay_choice__1reU5",prompt:"InPlay_prompt__1g_cl"}},,,function(e,a,t){e.exports={header:"App_header__3BlUL",toolbar:"App_toolbar__1jzI0"}},,,function(e,a,t){e.exports={addnew:"Start_addnew__2_Mwf"}},function(e,a,t){e.exports=t(17)},,,,,function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),c=t.n(l),o=(t(16),t(1)),i=t(6),u=t(3),s=function(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",null,Object(u.a)(e.players).sort((function(e,a){return e.score<a.score?1:-1})).map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.avatar," ",e.name),r.a.createElement("td",null,e.score))}))))},m=t(10),p=t.n(m),d=function(e){var a=Object(n.useState)(""),t=Object(o.a)(a,2),l=t[0],c=t[1];return r.a.createElement("section",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add players"),r.a.createElement("form",{className:p.a.addnew,onSubmit:function(a){a.preventDefault(),c(""),e.dispatch({type:"players/add",payload:l})}},r.a.createElement("input",{onChange:function(e){var a=e.target.value;a&&c(a)},value:l,name:"name",type:"text",placeholder:"Write name"}),r.a.createElement("input",{type:"submit",value:"Add"}))),r.a.createElement("section",null,r.a.createElement(s,{players:e.players})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement("button",{onClick:function(){e.dispatch({type:"game/start"})}},"Start")))},y=t(4),g=t.n(y),f={cards:[],deck:[],stage:"waiting",currentPlayerId:null,currentCardId:null},h=function(e,a){var t=a.findIndex((function(a){return a.id===e}));return t+1===a.length?a[0].id:a[t+1].id},E=function(e,a){return Object(i.a)(e,(function(t){switch(a.type){case"inplay/init":t.cards=a.payload.cards,t.deck=Object(u.a)(a.payload.cards).sort((function(){return Math.random()-.5})).map((function(e){return e.id})),t.currentPlayerId=a.payload.defaultPlayerId;break;case"inplay/draw":e.deck.length>0?(t.stage="picking",t.currentCardId=e.deck[0],t.deck=t.deck.filter((function(e,a){return 0!==a}))):t.stage="empty";break;case"inplay/endround":t.stage="waiting",t.currentPlayerId=a.payload,t.currentCardId=null,0===e.deck.length&&(t.stage="empty");break;case"inplay/scoring":t.stage="scoring";break;case"inplay/skip":if(e.deck.length>1){var n=t.deck.shift();null!=n&&(t.deck.push(n),t.currentCardId=t.deck[0])}}}))},v=function(e){var a=Object(n.useReducer)(E,f),t=Object(o.a)(a,2),l=t[0],c=t[1];Object(n.useEffect)((function(){fetch("https://spreadsheets.google.com/feeds/cells/1KwGMfgab2Mq0Zy8grS6fQLp8fqu9Qoikwb8qWg7OWqc/1/public/full?alt=json").then((function(e){return e.json()})).then((function(a){var t=a.feed.entry.reduce((function(e,a){var t=a.gs$cell;return 1===parseInt(t.col,10)&&parseInt(t.row,10)>1?e.push({prompt:t.$t,id:t.row}):2===parseInt(t.col,10)&&parseInt(t.row,10)>1&&(e[parseInt(t.row,10)-2].category=t.$t),e}),[]);c({type:"inplay/init",payload:{cards:t,defaultPlayerId:e.players[0].id}})}))}),[e.players[0].id]);var i=e.players.find((function(e){return e.id===l.currentPlayerId})),m=l.cards.find((function(e){return e.id===l.currentCardId}));return r.a.createElement("section",null,"waiting"===l.stage&&r.a.createElement("div",null,r.a.createElement(s,{players:e.players}),r.a.createElement("p",null,"Pass the phone to"," ",i?"".concat(i.avatar," ").concat(i.name):"".concat(e.players[0].avatar," ").concat(e.players[0].name)),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){c({type:"inplay/draw"})}},"Ready")),"empty"===l.stage&&r.a.createElement("div",null,r.a.createElement("p",null,"You have used all the cards"),r.a.createElement("button",{onClick:function(){e.appDispatch({type:"game/end"})}},"Finish")),"picking"===l.stage&&r.a.createElement("div",null,r.a.createElement("p",{className:g.a.prompt},"Play a song that fits the theme: ",r.a.createElement("strong",null,null===m||void 0===m?void 0:m.prompt)),null!=(null===m||void 0===m?void 0:m.category)&&r.a.createElement("p",null,"(Hint: ",m.category,")"),l.deck.length>1&&r.a.createElement("button",{onClick:function(){c({type:"inplay/skip"})}},"Skip card"),r.a.createElement("button",{onClick:function(){c({type:"inplay/scoring"})}},"Done")),"scoring"===l.stage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Enter who got the correct answers"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=a.target,n=new FormData(t),r=Object(u.a)(n).reduce((function(e,a){var t=Object(o.a)(a,2)[1];return"null"===t||(t in e?++e[t]:e[t]=1),e}),{});e.appDispatch({type:"game/scores",payload:r}),null!=l.currentPlayerId&&c({type:"inplay/endround",payload:h(l.currentPlayerId,e.players)})}},r.a.createElement("label",{className:g.a.choice,htmlFor:"name"},"Artist:"," ",r.a.createElement("select",{name:"artist"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,a){return r.a.createElement("option",{key:a,value:e.id},e.avatar," ",e.name)})))),r.a.createElement("label",{className:g.a.choice,htmlFor:"song"},"Song:"," ",r.a.createElement("select",{name:"song"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,a){return r.a.createElement("option",{key:a,value:e.id},e.avatar," ",e.name)})))),r.a.createElement("label",{className:g.a.choice,htmlFor:"category"},"Prompt:"," ",r.a.createElement("select",{name:"category"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,a){return r.a.createElement("option",{key:a,value:e.id},e.avatar," ",e.name)})))),r.a.createElement("button",null,"Done"))))},b=function(){return Math.random().toString(36).slice(-5)},k=function(){var e=["\ud83d\udc35","\ud83d\udc36","\ud83e\udd8a","\ud83e\udd9d","\ud83d\udc34","\ud83e\udd93","\ud83d\udc37","\ud83d\udc17","\ud83e\udd92","\ud83d\udc2d","\ud83d\udc39","\ud83d\udc38","\ud83d\udc2c"];return function(){var a=e[Math.floor(Math.random()*e.length)];return e=e.filter((function(e){return e!==a})),a}}(),w=t(7),I=t.n(w),S=localStorage.getItem("currentgame"),j={gameState:"start",players:[{name:"Tom",score:0,id:b(),avatar:k()},{name:"Amy",score:0,id:b(),avatar:k()}]},_=null!=S?JSON.parse(S):j,O=function(e,a){var t=Object(i.a)(e,(function(e){switch(a.type){case"players/add":e.players.push({name:a.payload,score:0,id:b(),avatar:k()});break;case"game/start":e.gameState="inplay";break;case"game/scores":e.players.forEach((function(e){e.id in a.payload&&(e.score+=a.payload[e.id])}));break;case"game/end":e.gameState="finished";break;case"game/restart":return j}}));return localStorage.setItem("currentgame",JSON.stringify(t)),t};var P=function(){var e=Object(n.useReducer)(O,_),a=Object(o.a)(e,2),t=a[0],l=a[1];return r.a.createElement("div",null,r.a.createElement("section",{className:I.a.header},r.a.createElement("h1",null,"DJ Game"),r.a.createElement("div",{className:I.a.toolbar},"start"!==t.gameState&&"finished"!==t.gameState&&r.a.createElement("button",{onClick:function(){l({type:"game/end"})}},"Finish"))),"start"===t.gameState&&r.a.createElement(d,{players:t.players,dispatch:l}),"inplay"===t.gameState&&r.a.createElement(v,{players:t.players,appDispatch:l}),"finished"===t.gameState&&r.a.createElement("section",null,r.a.createElement(s,{players:t.players}),r.a.createElement("button",{onClick:function(){localStorage.clear(),l({type:"game/restart"})}},"Restart")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.96c0d22b.chunk.js.map