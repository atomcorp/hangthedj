(this.webpackJsonphangthedj=this.webpackJsonphangthedj||[]).push([[0],[,,,,function(e,t,a){e.exports={choice:"InPlay_choice__1reU5",prompt:"InPlay_prompt__1g_cl"}},,,function(e,t,a){e.exports={header:"App_header__3BlUL",toolbar:"App_toolbar__1jzI0"}},,,function(e,t,a){e.exports={addnew:"Start_addnew__2_Mwf"}},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(16),a(1)),i=a(6),u=a(3),s=function(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",null,Object(u.a)(e.players).sort((function(e,t){return e.score<t.score?1:-1})).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.avatar," ",e.name),r.a.createElement("td",null,e.score))}))))},m=a(10),p=a.n(m),d=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],c=a[1];return r.a.createElement("section",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Add players"),r.a.createElement("form",{className:p.a.addnew,onSubmit:function(t){t.preventDefault(),c(""),e.dispatch({type:"players/add",payload:l})}},r.a.createElement("input",{onChange:function(e){var t=e.target.value;t&&c(t)},value:l,name:"name",type:"text",placeholder:"Write name"}),r.a.createElement("input",{type:"submit",value:"Add"}))),r.a.createElement("section",null,r.a.createElement(s,{players:e.players})),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement("button",{onClick:function(){e.dispatch({type:"game/start"})}},"Start")))},y=a(4),f=a.n(y),g={cards:[],deck:[],stage:"waiting",currentPlayerId:null,currentCardId:null},h=function(e,t){var a=t.findIndex((function(t){return t.id===e}));return a+1===t.length?t[0].id:t[a+1].id},E=function(e,t){return Object(i.a)(e,(function(a){switch(t.type){case"inplay/init":a.cards=t.payload.cards,a.deck=Object(u.a)(t.payload.cards).sort((function(){return Math.random()-.5})).map((function(e){return e.id})),a.currentPlayerId=t.payload.defaultPlayerId;break;case"inplay/draw":e.deck.length>0?(a.stage="picking",a.currentCardId=e.deck[0],a.deck=a.deck.filter((function(e,t){return 0!==t}))):a.stage="empty";break;case"inplay/endround":a.stage="waiting",a.currentPlayerId=t.payload,a.currentCardId=null,0===e.deck.length&&(a.stage="empty");break;case"inplay/scoring":a.stage="scoring";break;case"inplay/skip":if(e.deck.length>1){var n=a.deck.shift();null!=n&&(a.deck.push(n),a.currentCardId=a.deck[0])}}}))},b=function(e){var t=Object(n.useReducer)(E,g),a=Object(o.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){fetch("https://spreadsheets.google.com/feeds/cells/1KwGMfgab2Mq0Zy8grS6fQLp8fqu9Qoikwb8qWg7OWqc/1/public/full?alt=json").then((function(e){return e.json()})).then((function(t){var a=t.feed.entry.reduce((function(e,t){var a=t.gs$cell;return 1===parseInt(a.col,10)&&parseInt(a.row,10)>1?e.push({prompt:a.$t,id:a.row}):2===parseInt(a.col,10)&&parseInt(a.row,10)>1&&(e[parseInt(a.row,10)-2].category=a.$t),e}),[]);c({type:"inplay/init",payload:{cards:a,defaultPlayerId:e.players[0].id}})}))}),[e.players[0].id]);var i=e.players.find((function(e){return e.id===l.currentPlayerId})),m=l.cards.find((function(e){return e.id===l.currentCardId}));return r.a.createElement("section",null,"waiting"===l.stage&&r.a.createElement("div",null,r.a.createElement(s,{players:e.players}),r.a.createElement("p",null,"Pass the phone to"," ",i?"".concat(i.avatar," ").concat(i.name):"".concat(e.players[0].avatar," ").concat(e.players[0].name)),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){c({type:"inplay/draw"})}},"Ready")),"empty"===l.stage&&r.a.createElement("div",null,r.a.createElement("p",null,"You have used all the cards"),r.a.createElement("button",{onClick:function(){e.appDispatch({type:"game/end"})}},"Finish")),"picking"===l.stage&&r.a.createElement("div",null,r.a.createElement("p",{className:f.a.prompt},"Play a song that fits the theme: ",r.a.createElement("strong",null,null===m||void 0===m?void 0:m.prompt)),null!=(null===m||void 0===m?void 0:m.category)&&r.a.createElement("p",null,"(Hint: ",m.category,")"),l.deck.length>1&&r.a.createElement("button",{onClick:function(){c({type:"inplay/skip"})}},"Skip card"),r.a.createElement("button",{onClick:function(){c({type:"inplay/scoring"})}},"Done")),"scoring"===l.stage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Enter who got the correct answers"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=t.target,n=new FormData(a),r=Object(u.a)(n).reduce((function(e,t){var a=Object(o.a)(t,2)[1];return"null"===a||(a in e?++e[a]:e[a]=1),e}),{});e.appDispatch({type:"game/scores",payload:r}),null!=l.currentPlayerId&&c({type:"inplay/endround",payload:h(l.currentPlayerId,e.players)})}},r.a.createElement("label",{className:f.a.choice,htmlFor:"name"},"Artist:"," ",r.a.createElement("select",{name:"artist"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),r.a.createElement("label",{className:f.a.choice,htmlFor:"song"},"Song:"," ",r.a.createElement("select",{name:"song"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),r.a.createElement("label",{className:f.a.choice,htmlFor:"category"},"Prompt:"," ",r.a.createElement("select",{name:"category"},r.a.createElement("option",{value:"null"},"-"),e.players.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),r.a.createElement("button",null,"Done"))))},v=function(){return Math.random().toString(36).slice(-5)},k=function(){var e=["\ud83d\udc35","\ud83d\udc36","\ud83e\udd8a","\ud83e\udd9d","\ud83d\udc34","\ud83e\udd93","\ud83d\udc37","\ud83d\udc17","\ud83e\udd92","\ud83d\udc2d","\ud83d\udc39","\ud83d\udc38","\ud83d\udc2c"];return function(){var t=e[Math.floor(Math.random()*e.length)];return e=e.filter((function(e){return e!==t})),t}}(),w=a(7),I=a.n(w),S=window.localStorage.getItem("currentgame"),j=null!=S?JSON.parse(S):{gameState:"start",players:[{name:"Tom",score:0,id:v(),avatar:k()},{name:"Amy",score:0,id:v(),avatar:k()}]},_=function(e,t){var a=Object(i.a)(e,(function(e){switch(t.type){case"players/add":e.players.push({name:t.payload,score:0,id:v(),avatar:k()});break;case"game/start":e.gameState="inplay";break;case"game/scores":e.players.forEach((function(e){e.id in t.payload&&(e.score+=t.payload[e.id])}));break;case"game/end":e.gameState="finished";break;case"game/restart":return j}}));return localStorage.setItem("currentgame",JSON.stringify(a)),a};var O=function(){var e=Object(n.useReducer)(_,j),t=Object(o.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",null,r.a.createElement("section",{className:I.a.header},r.a.createElement("h1",null,"DJ Game"),r.a.createElement("div",{className:I.a.toolbar},"start"!==a.gameState&&r.a.createElement("button",{onClick:function(){l({type:"game/end"})}},"Finish"))),"start"===a.gameState&&r.a.createElement(d,{players:a.players,dispatch:l}),"inplay"===a.gameState&&r.a.createElement(b,{players:a.players,appDispatch:l}),"finished"===a.gameState&&r.a.createElement("section",null,r.a.createElement(s,{players:a.players}),r.a.createElement("button",{onClick:function(){l({type:"game/restart"})}},"Restart")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.d6a27760.chunk.js.map